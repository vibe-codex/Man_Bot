# üñ•Ô∏è –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–æ–ª–Ω–∞—è –∫–æ–ø–∏—è VPS-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## üì¶ –í–∫–ª—é—á–∞–µ—Ç:

- ‚úÖ **PostgreSQL + pgvector** (–ø–æ—Ä—Ç 5433)
- ‚úÖ **FastAPI RAG Server** (–ø–æ—Ä—Ç 8000)
- ‚úÖ **Telegram Bot** (aiogram 3)
- ‚úÖ **pgAdmin** (–ø–æ—Ä—Ç 5050) ‚Äî –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **Hot-reload** ‚Äî –∫–æ–¥ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
cd bot_telegram

# –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω)
copy .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env:
# - GOOGLE_API_KEY=your_key_here
# - TG_BOT_TOKEN=your_bot_token_here
```

### 2. –ó–∞–ø—É—Å–∫

**–í–∞—Ä–∏–∞–Ω—Ç –ê ‚Äî –ß–µ—Ä–µ–∑ –º–µ–Ω—é (Windows):**
```bash
start-local.bat
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë ‚Äî –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É:**
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ
docker-compose -f docker-compose.local.yml up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose -f docker-compose.local.yml down

# –õ–æ–≥–∏
docker-compose -f docker-compose.local.yml logs -f
```

### 3. –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞

| –°–µ—Ä–≤–∏—Å | URL | –õ–æ–≥–∏–Ω/–ü–∞—Ä–æ–ª—å |
|--------|-----|--------------|
| API Docs | http://localhost:8000/docs | ‚Äî |
| pgAdmin | http://localhost:5050 | admin@admin.com / admin123 |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | localhost:5433 | man_admin / man_password_2026 |

## üì• –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Ö–Ω–∏–∫

```bash
# –ß–µ—Ä–µ–∑ –º–µ–Ω—é (–æ–ø—Ü–∏—è 6)
start-local.bat

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
docker-compose -f docker-compose.local.yml exec rag-server-local \
  python scripts/load_knowledge.py --source /app/knowledge_files --provider google
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API:
```bash
curl http://localhost:8000/docs
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
start-local.bat ‚Üí –æ–ø—Ü–∏—è 4

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
docker exec -it man_bot_postgres_local psql -U man_admin -d man_vector_db

# SQL –∑–∞–ø—Ä–æ—Å—ã:
\dt                                      # —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
SELECT COUNT(*) FROM knowledge_units;    # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Ö–Ω–∏–∫
SELECT ku_id, title FROM knowledge_units LIMIT 5;
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–∞:
1. –û—Ç–∫—Ä–æ–π Telegram
2. –ù–∞–π–¥–∏ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞
3. –û—Ç–ø—Ä–∞–≤—å `/start`
4. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å!

## üîÑ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (hot-reload)

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞:
- **Server/** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è
- **Bot/** ‚Äî –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –±–æ—Ç–∞
docker-compose -f docker-compose.local.yml restart telegram-bot-local
```

## üßπ –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö

```bash
# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
docker-compose -f docker-compose.local.yml down -v

# –ü–æ—Ç–æ–º –∑–∞–Ω–æ–≤–æ:
docker-compose -f docker-compose.local.yml up -d
```

## üÜò –û—Ç–ª–∞–¥–∫–∞

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å —Ç–æ–∫–µ–Ω
docker-compose -f docker-compose.local.yml logs telegram-bot-local

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏
docker-compose -f docker-compose.local.yml restart telegram-bot-local
```

### –û—à–∏–±–∫–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
```bash
# –ü—Ä–æ–≤–µ—Ä—å API –∫–ª—é—á
docker-compose -f docker-compose.local.yml exec rag-server-local env | grep GOOGLE
```

### –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç
```bash
# –ù–∞–π–¥–∏ —á—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç 5433
netstat -ano | findstr 5433

# –ò–ª–∏ –∏–∑–º–µ–Ω–∏ –ø–æ—Ä—Ç –≤ docker-compose.local.yml
# ports:
#   - "5434:5432"  # –≤–º–µ—Å—Ç–æ 5433
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
bot_telegram/
‚îú‚îÄ‚îÄ docker-compose.local.yml    ‚Üê –ª–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
‚îú‚îÄ‚îÄ start-local.bat            ‚Üê —É–¥–æ–±–Ω—ã–π –∑–∞–ø—É—Å–∫ (Windows)
‚îú‚îÄ‚îÄ .env                       ‚Üê —Ç–≤–æ–∏ —Ç–æ–∫–µ–Ω—ã (–Ω–µ –∫–æ–º–º–∏—Ç—å!)
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.local       ‚Üê –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ app.py
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.local
‚îÇ   ‚îî‚îÄ‚îÄ bot.py
‚îî‚îÄ‚îÄ KIMI_OUTPUT/              ‚Üê —Å—é–¥–∞ —Å–∫–æ–ø–∏—Ä—É–π —Å–≤–æ–∏ 60 —Ç–µ—Ö–Ω–∏–∫
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **.env —Ñ–∞–π–ª** –Ω–µ –∫–æ–º–º–∏—Ç—å –≤ Git!
2. **–õ–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞** –æ—Ç–¥–µ–ª—å–Ω–∞—è –æ—Ç VPS ‚Äî –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ
3. **Hot-reload** —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è server/
4. **–¢–æ–∫–µ–Ω—ã** –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ –∂–µ, —á—Ç–æ –∏ –¥–ª—è VPS

## üéØ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–∞—è –∫–æ–ø–∏—è VPS –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ.

–ú–æ–∂–Ω–æ:
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞
- ‚úÖ –ú–µ–Ω—è—Ç—å –∫–æ–¥ –∏ –≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–∑—É
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞—Ç—å –Ω–æ–≤—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏
- ‚úÖ –°–º–æ—Ç—Ä–µ—Ç—å –≤ –±–∞–∑—É —á–µ—Ä–µ–∑ pgAdmin
- ‚úÖ –û—Ç–ª–∞–∂–∏–≤–∞—Ç—å API —á–µ—Ä–µ–∑ Swagger UI